<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>A Little Surprise... ‚ú®</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Gochi+Hand&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --blush: #ffb7b2;
        --rose: #ff4d6d;
        --cream: #fffaf0;
        --ink: #4a4a4a;
      }

      body,
      html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: var(--blush);
        font-family: "Gochi Hand", cursive;
      }

      .content-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: var(--cream);
        z-index: 1;
      }

      .polaroid {
        background: white;
        padding: 15px 15px 40px 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transform: rotate(-2deg);
        border: 1px solid #eee;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 85%;
        max-width: 320px;
        animation: float 4s ease-in-out infinite;
      }

      .doodle-img {
        width: 100%;
        height: auto;
        border-radius: 2px;
      }

      h1 {
        font-family: "Caveat", cursive;
        font-size: 2.2rem;
        color: var(--rose);
        margin: 15px 0 5px 0;
      }

      .main-q {
        font-size: 1.3rem;
        color: var(--ink);
        margin: 0;
      }

      #message-text {
        color: var(--rose);
        font-size: 1.1rem;
        min-height: 1.4rem;
        margin: 10px 0;
        font-style: italic;
        text-align: center;
      }

      .btn-zone {
        display: flex;
        gap: 15px;
        position: relative;
        z-index: 20;
        margin-top: 5px;
      }

      button {
        font-family: "Gochi Hand", cursive;
        padding: 10px 25px;
        font-size: 1.2rem;
        border: 2px solid var(--ink);
        border-radius: 50px;
        cursor: pointer;
        background: white;
      }

      #yesBtn {
        background: var(--rose);
        color: white;
        box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
        animation: heartBeat 1.5s infinite;
      }

      #scratch-canvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 10;
        cursor: crosshair;
        touch-action: none;
        transition: opacity 1s ease;
      }

      .instruction {
        position: fixed;
        top: 45%;
        width: 100%;
        text-align: center;
        color: white;
        font-size: 1.8rem;
        z-index: 11;
        pointer-events: none;
      }

      .success-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--rose);
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        z-index: 100;
        text-align: center;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(-2deg);
        }
        50% {
          transform: translateY(-10px) rotate(1.5deg);
        }
      }

      @keyframes heartBeat {
        0% {
          transform: scale(1);
        }
        14% {
          transform: scale(1.1);
        }
        28% {
          transform: scale(1);
        }
        42% {
          transform: scale(1.1);
        }
        70% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body>
    <div class="instruction" id="hint">Scratch to reveal... ‚ú®</div>

    <div class="content-layer">
      <div class="polaroid">
        <img
          src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpndWp3ZzR4eHpxZzR4eHpxZzR4eHpxZzR4eHpxZzR4eHpxJmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/c76IJLufpNwSULPk77/giphy.gif"
          class="doodle-img"
        />
        <h1 id="nameTag">Hi Beautiful!</h1>
        <p class="main-q">Will you be my Valentine?</p>

        <div id="message-text"></div>

        <div class="btn-zone">
          <button id="yesBtn">YES!</button>
          <button id="noBtn">No</button>
        </div>
      </div>
    </div>

    <canvas id="scratch-canvas"></canvas>

    <div class="success-screen" id="success">
      <h1 style="color: white; font-size: 3rem">Yay! ü•∞</h1>
      <p style="color: white; font-size: 1.4rem; padding: 0 20px">
        I knew you'd say yes! <br />
        I can‚Äôt wait to see you! ‚ú®üåπ
      </p>
    </div>

    <script>
      const canvas = document.getElementById("scratch-canvas");
      const ctx = canvas.getContext("2d");
      const messageText = document.getElementById("message-text");
      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");

      const noMessages = [
        "Are you sure? ü•∫",
        "Think again! üå∏",
        "But I'll be so sad...",
        "I'll buy you chocolate! üç´",
        "Last chance! ‚ú®",
        "You're breaking my heart! ‚ù§Ô∏è",
        "Wrong button! üòÇ",
        "Still trying? üòâ",
        "Almost gone...",
        "Bye bye No button! üëã",
      ];

      let isDrawing = false;
      let scratchCount = 0;
      let noClickCount = 0;

      function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Draw the scratch layer
        ctx.fillStyle = "#ffb7b2";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Add some hearts
        ctx.font = "30px Arial";
        for (let i = 0; i < 15; i++) {
          ctx.fillText(
            "‚ù§Ô∏è",
            Math.random() * canvas.width,
            Math.random() * canvas.height
          );
        }

        // --- ADD THIS LINE TO SHOW THE CARD ONLY AFTER CANVAS IS PAINTED ---
        document.querySelector(".content-layer").style.opacity = "1";
      }

      function scratch(x, y) {
        ctx.globalCompositeOperation = "destination-out";
        ctx.beginPath();
        ctx.arc(x, y, 40, 0, Math.PI * 2);
        ctx.fill();
        scratchCount++;
        if (scratchCount > 10)
          document.getElementById("hint").style.opacity = "0";
        if (scratchCount > 150) {
          canvas.style.pointerEvents = "none";
          canvas.style.opacity = "0";
        }
      }

      canvas.addEventListener("mousedown", () => (isDrawing = true));
      canvas.addEventListener("mouseup", () => (isDrawing = false));
      canvas.addEventListener(
        "mousemove",
        (e) => isDrawing && scratch(e.clientX, e.clientY)
      );
      canvas.addEventListener("touchstart", (e) => {
        isDrawing = true;
        scratch(e.touches[0].clientX, e.touches[0].clientY);
      });
      canvas.addEventListener(
        "touchmove",
        (e) => isDrawing && scratch(e.touches[0].clientX, e.touches[0].clientY)
      );

      function handleNo() {
        noClickCount++;

        if (noClickCount >= 10) {
          noBtn.style.display = "none";
          messageText.innerText =
            "The 'No' button went on vacation. Try 'Yes'! ‚ù§Ô∏è";
          return;
        }

        messageText.innerText = noMessages[noClickCount - 1];

        const padding = 60;
        const x = Math.max(
          padding,
          Math.random() * (window.innerWidth - noBtn.offsetWidth - padding)
        );
        const y = Math.max(
          padding,
          Math.random() * (window.innerHeight - noBtn.offsetHeight - padding)
        );
        noBtn.style.position = "fixed";
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
      }

      noBtn.addEventListener("mouseover", handleNo);
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        handleNo();
      });

      yesBtn.addEventListener("click", () => {
        document.getElementById("success").style.display = "flex";
      });

      init();
    </script>
  </body>
</html>
