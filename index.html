<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Note For You üíå</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Gochi+Hand&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #fdf0d5;
        --paper: #fff;
        --tape: rgba(173, 216, 230, 0.5);
        --ink: #333;
        --heart: #ff4d6d;
        --pencil: #669bbc;
      }

      body {
        margin: 0;
        background-color: var(--bg);
        background-image: radial-gradient(#d1bfa7 0.8px, transparent 0.8px);
        background-size: 20px 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-family: "Gochi Hand", cursive;
        overflow: hidden;
        touch-action: manipulation; /* Prevents zooming on fast taps */
      }

      .canvas {
        position: relative;
        width: 90%;
        max-width: 320px;
        height: 420px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .paper-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        background: white;
        box-shadow: 2px 4px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #eee;
      }

      .layer-1 {
        transform: rotate(-3deg);
        background: #f1faee;
      }
      .layer-2 {
        transform: rotate(2deg);
        background: #fefae0;
      }

      .main-note {
        position: relative;
        width: 100%;
        padding: 40px 20px;
        background: white;
        transform: rotate(-1deg);
        z-index: 10;
        text-align: center;
        box-shadow: 5px 10px 20px rgba(0, 0, 0, 0.05);
        box-sizing: border-box;
      }

      .tape {
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%) rotate(-2deg);
        width: 120px;
        height: 35px;
        background: var(--tape);
        border: 1px dashed rgba(255, 255, 255, 0.5);
        z-index: 100;
      }

      h1 {
        font-family: "Caveat", cursive;
        font-size: 2.2rem;
        color: var(--ink);
        margin: 10px 0;
      }

      .doodle-img {
        width: 120px;
        height: 120px;
        margin-bottom: 10px;
        object-fit: contain;
      }

      .button-zone {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        margin-top: 20px;
        min-height: 120px; /* Space for buttons */
      }

      button {
        font-family: "Gochi Hand", cursive;
        padding: 12px 30px;
        font-size: 1.4rem;
        border: 2px solid var(--ink);
        cursor: pointer;
        background: white;
      }

      #yesBtn {
        background: var(--heart);
        color: white;
        box-shadow: 4px 4px 0px var(--ink);
      }

      #noBtn {
        color: var(--ink);
        box-shadow: 3px 3px 0px var(--ink);
        transition: left 0.2s ease, top 0.2s ease; /* Smoother jump */
      }

      .hidden {
        display: none;
      }

      #stamp {
        position: absolute;
        bottom: 15px;
        right: 15px;
        transform: rotate(15deg);
        color: var(--pencil);
        font-size: 0.7rem;
        border: 1px solid var(--pencil);
        padding: 4px;
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div class="canvas">
      <div class="paper-layer layer-1"></div>
      <div class="paper-layer layer-2"></div>

      <div class="main-note" id="note">
        <div class="tape"></div>

        <img
          src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpndWp3ZzR4eHpxZzR4eHpxZzR4eHpxZzR4eHpxZzR4eHpxJmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/c76IJLufpNwSULPk77/giphy.gif"
          class="doodle-img"
          alt="Cute bear"
        />

        <h1>Will you go on a Valentine's date with me?</h1>

        <div class="button-zone">
          <button id="yesBtn">YES!</button>
          <button id="noBtn">No</button>
        </div>
        <div id="stamp">CONFIDENTIAL üíå</div>
      </div>

      <div class="main-note hidden" id="success">
        <div class="tape" style="background: rgba(255, 182, 193, 0.5)"></div>
        <img
          src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnRreG1ueG1ueG1ueG1ueG1ueG1ueG1ueG1ueG1ueG1ueCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/KztT2c4u8mYYUiMKdJ/giphy.gif"
          class="doodle-img"
          alt="Hearts"
        />
        <h1 style="color: var(--heart)">It's a Date! ‚ù§Ô∏è</h1>
        <p>I can‚Äôt wait to see you!</p>
      </div>
    </div>

    <script>
      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");
      const note = document.getElementById("note");
      const success = document.getElementById("success");

      let clickCount = 0;

      const handleNo = () => {
        clickCount++;

        // 1. Define a generous safety margin from the viewport edges
        const margin = 50;

        // 2. Get the actual visible area (Viewport)
        const vWidth = window.innerWidth;
        const vHeight = window.innerHeight;

        // 3. Calculate the maximum safe coordinates
        // We subtract the button size AND the margin from the total width/height
        const maxX = vWidth - noBtn.offsetWidth - margin;
        const maxY = vHeight - noBtn.offsetHeight - margin;

        // 4. Generate random coordinates within the safe range
        // Math.max(margin, ...) ensures it doesn't go below the top/left margin
        const randomX = Math.max(margin, Math.floor(Math.random() * maxX));
        const randomY = Math.max(margin, Math.floor(Math.random() * maxY));

        // 5. Apply the coordinates
        noBtn.style.position = "fixed";
        noBtn.style.left = `${randomX}px`;
        noBtn.style.top = `${randomY}px`;

        // 6. Optional: Small rotation to keep the "hand-drawn" look
        const randomRot = Math.random() * 20 - 10; // -10 to +10 degrees
        noBtn.style.transform = `rotate(${randomRot}deg)`;

        if (clickCount > 12) {
          noBtn.style.display = "none";
        }
      };

      // Handle both hover and touch
      noBtn.addEventListener("mouseover", handleNo);
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault(); // Stop mobile from "clicking" before moving
        handleNo();
      });

      yesBtn.addEventListener("click", () => {
        note.classList.add("hidden");
        success.classList.remove("hidden");
        noBtn.style.display = "none";

        // Trigger some fun heart bursts!
        confetti();
      });

      function confetti() {
        for (let i = 0; i < 20; i++) {
          const heart = document.createElement("div");
          heart.innerHTML = "‚ù§Ô∏è";
          heart.style.position = "fixed";
          heart.style.left = "50vw";
          heart.style.top = "50vh";
          heart.style.fontSize = "2rem";
          heart.style.transition = "all 1s ease-out";
          heart.style.zIndex = "1000";
          document.body.appendChild(heart);

          const angle = Math.random() * Math.PI * 2;
          const velocity = Math.random() * 200 + 100;
          const x = Math.cos(angle) * velocity;
          const y = Math.sin(angle) * velocity;

          setTimeout(() => {
            heart.style.transform = `translate(${x}px, ${y}px)`;
            heart.style.opacity = "0";
          }, 50);

          setTimeout(() => heart.remove(), 1000);
        }
      }
    </script>
  </body>
</html>
